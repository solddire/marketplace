<template>
    <div class="max-w-5xl mx-auto py-8 px-4">
        <h1 class="text-2xl font-bold mb-6">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h1>

        <div v-if="loading" class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

        <div v-else>
            <div v-if="ads.length > 0" class="grid md:grid-cols-2 gap-4">
                <div v-for="ad in ads" :key="ad.id" class="border rounded-lg p-4 shadow-sm hover:shadow-md transition">
                    <h2 class="text-xl font-semibold">{{ ad.title }}</h2>
                    <p class="text-gray-700 mt-1">{{ ad.description }}</p>
                    <p v-if="ad.price" class="mt-2 text-blue-600 font-medium">{{ ad.price }} ‚ÇΩ</p>
                </div>
            </div>

            <div v-else class="text-center mt-10">
                <p class="text-gray-600 mb-4">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π.</p>
                <router-link to="/create-ad">
                    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">–°–æ–∑–¥–∞—Ç—å
                        –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
                </router-link>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import axios from '../axios';

const ads = ref([])
const loading = ref(true)

onMounted(async () => {
    try {
        const response = await axios.get('/api/ads') // üëà –∞–¥–∞–ø—Ç–∏—Ä—É–π, –µ—Å–ª–∏ —Ä–æ—É—Ç –¥—Ä—É–≥–æ–π
        ads.value = response.data
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:', error)
    } finally {
        loading.value = false
    }
})
</script>

<style scoped>
/* –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
</style>